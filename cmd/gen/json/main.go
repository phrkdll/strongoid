package main

import "github.com/phrkdll/strongoid/internal/generator"

const methodTemplate = `// Code generated by strongoid; DO NOT EDIT!
package {{ .Package }}

import "github.com/phrkdll/strongoid/pkg/strongoid"

{{ range .Types }}
func (t {{ .Name }}) MarshalJSON() ([]byte, error) {
	return strongoid.Id[{{ .BaseType }}](t).MarshalJSON()
}

func (t *{{ .Name }}) UnmarshalJSON(data []byte) error {
	return (*strongoid.Id[{{ .BaseType }}])(t).UnmarshalJSON(data)
}
{{ end }}
`

func main() {
	generator.Generate(methodTemplate, "id_json.gen.go")
}
